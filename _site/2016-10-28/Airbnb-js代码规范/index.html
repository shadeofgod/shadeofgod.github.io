<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Airbnb js代码规范（译）</title>
  <meta name="keywords" content="blog,html,css,javascript,react,vue,nodejs,博客,前端开发,程序员" />
  <meta name="description" content="shadeofgod的个人博客,shadeofgod's dev blog" />
  <link href="/assets/images/favicon.ico" rel="bookmark" type="image/x-icon" />
  <link href="/assets/images/favicon.ico" rel="icon" type="image/x-icon" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" type="text/css">

  <!-- Font -->
  <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for ShadeofGod's Devblog" href="/feed.xml" />
  <!-- Begin Jekyll SEO tag v2.2.3 -->
<title>Airbnb js代码规范（译） | ShadeofGod’s Devblog</title>
<meta property="og:title" content="Airbnb js代码规范（译）" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/2016-10-28/Airbnb-js%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" />
<meta property="og:url" content="http://localhost:4000/2016-10-28/Airbnb-js%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" />
<meta property="og:site_name" content="ShadeofGod’s Devblog" />
<meta property="og:image" content="http://localhost:4000/" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-10-28T22:13:27+00:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Airbnb js代码规范（译）","author":{"@type":"Person","name":null},"image":"http://localhost:4000/","datePublished":"2016-10-28T22:13:27+00:00","dateModified":"2016-10-28T22:13:27+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2016-10-28/Airbnb-js%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"},"url":"http://localhost:4000/2016-10-28/Airbnb-js%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Analytics -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-100363260-1', 'auto');
ga('send', 'pageview');

</script>



</head>

<body>
  <div class="content-container">
    <header>
  <div class="header-small">
    <a href="http://localhost:4000">ShadeofGod's Devblog</a>
  </div>
</header>
<div class="post">
  <div class="post-title">Airbnb js代码规范（译）</div>
  <span class="post-date">
    <time>28 Oct 2016</time>
  </span>
  <div class="post-tag">
    <ul>
      
      <li>
        <a href="http://localhost:4000/tags#Javascript">
          <span><i class="fa fa-paperclip" aria-hidden="true"></i>Javascript</span>
        </a>
      </li>
      
      
    </ul>
  </div>

  <p>https://github.com/airbnb/javascript</p>

<p>Airbnb关于JS的代码规范，还是推荐阅读英文原文，尝试缓慢翻译填坑中.</p>

<p>注意：有很多内容是ES6的规范，使用可以按照自己的需要，并注意浏览器兼容性。</p>

<p>correct me if something wrong :D</p>

<p>(stop updating currently since there are so many es6 stuff and I can’t guarantee the quality without good understanding of es6.)</p>

<h2 id="目录">目录</h2>

<ol>
  <li><a href="https://github.com/airbnb/javascript#types">Types</a> 类型</li>
  <li><a href="https://github.com/airbnb/javascript#references">References</a> 引用</li>
  <li><a href="https://github.com/airbnb/javascript#objects">Objects</a> 对象</li>
  <li><a href="https://github.com/airbnb/javascript#arrays">Arrays</a> 数组</li>
  <li><a href="https://github.com/airbnb/javascript#destructuring">Destructuring</a> 去构造化</li>
  <li><a href="https://github.com/airbnb/javascript#strings">Strings</a> 字符串</li>
  <li><a href="https://github.com/airbnb/javascript#functions">Functions</a>  函数</li>
  <li><a href="https://github.com/airbnb/javascript#arrow-functions">Arrow Functions</a>  箭头函数</li>
  <li><a href="https://github.com/airbnb/javascript#classes--constructors">Classes &amp; Constructors</a> 类／构造器</li>
  <li><a href="https://github.com/airbnb/javascript#modules">Modules</a> 模组</li>
  <li><a href="https://github.com/airbnb/javascript#iterators-and-generators">Iterators and Generators</a></li>
  <li><a href="https://github.com/airbnb/javascript#properties">Properties</a></li>
  <li><a href="https://github.com/airbnb/javascript#variables">Variables</a></li>
  <li><a href="https://github.com/airbnb/javascript#hoisting">Hoisting</a></li>
  <li><a href="https://github.com/airbnb/javascript#comparison-operators--equality">Comparison Operators &amp; Equality</a></li>
  <li><a href="https://github.com/airbnb/javascript#blocks">Blocks</a></li>
  <li><a href="https://github.com/airbnb/javascript#comments">Comments</a></li>
  <li><a href="https://github.com/airbnb/javascript#whitespace">Whitespace</a></li>
  <li><a href="https://github.com/airbnb/javascript#commas">Commas</a></li>
  <li><a href="https://github.com/airbnb/javascript#semicolons">Semicolons</a></li>
  <li><a href="https://github.com/airbnb/javascript#type-casting--coercion">Type Casting &amp; Coercion</a></li>
  <li><a href="https://github.com/airbnb/javascript#naming-conventions">Naming Conventions</a></li>
  <li><a href="https://github.com/airbnb/javascript#accessors">Accessors</a></li>
  <li><a href="https://github.com/airbnb/javascript#events">Events</a></li>
  <li><a href="https://github.com/airbnb/javascript#jquery">jQuery</a></li>
  <li><a href="https://github.com/airbnb/javascript#ecmascript-5-compatibility">ECMAScript 5 Compatibility</a></li>
  <li><a href="https://github.com/airbnb/javascript#ecmascript-6-es-2015-styles">ECMAScript 6+ (ES 2015+) Styles</a></li>
  <li><a href="https://github.com/airbnb/javascript#testing">Testing</a></li>
  <li><a href="https://github.com/airbnb/javascript#performance">Performance</a></li>
  <li><a href="https://github.com/airbnb/javascript#resources">Resources</a></li>
  <li><a href="https://github.com/airbnb/javascript#in-the-wild">In the Wild</a></li>
  <li><a href="https://github.com/airbnb/javascript#translation">Translation</a></li>
  <li><a href="https://github.com/airbnb/javascript#the-javascript-style-guide-guide">The JavaScript Style Guide Guide</a></li>
  <li><a href="https://github.com/airbnb/javascript#chat-with-us-about-javascript">Chat With Us About JavaScript</a></li>
  <li><a href="https://github.com/airbnb/javascript#contributors">Contributors</a></li>
  <li><a href="https://github.com/airbnb/javascript#license">License</a></li>
</ol>

<h2 id="type-类型">Type 类型</h2>

<ul>
  <li>
    <p>1.1 当你处理一个如下简单的数据类型时，你是直接对它对应的值进行操作。</p>

    <ul>
      <li><code class="highlighter-rouge">string</code></li>
      <li><code class="highlighter-rouge">number</code></li>
      <li><code class="highlighter-rouge">boolean</code></li>
      <li><code class="highlighter-rouge">null</code></li>
      <li><code class="highlighter-rouge">undefined</code></li>
    </ul>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>

<span class="nx">bar</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span> <span class="c1">// =&gt; 1, 9</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>1.2 当你处理一个如下复杂的数据类型时，你处理的是它的引用。</p>

    <ul>
      <li><code class="highlighter-rouge">object</code></li>
      <li><code class="highlighter-rouge">array</code></li>
      <li><code class="highlighter-rouge">function</code></li>
    </ul>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>

<span class="nx">bar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">bar</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// =&gt; 9, 9</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="references-引用">References 引用</h2>

<ul>
  <li>
    <p>2.1 使用 <code class="highlighter-rouge">const</code> 来声明所有的引用，避免使用 <code class="highlighter-rouge">var</code>。详见 eslint: <a href="http://eslint.org/docs/rules/prefer-const.html"><code class="highlighter-rouge">prefer-const</code></a>, <a href="http://eslint.org/docs/rules/no-const-assign.html"><code class="highlighter-rouge">no-const-assign</code></a></p>

    <blockquote>
      <p>为什么？因为这样可以保证你不会重新给引用赋一个另外的值，避免以此引起的bug和对代码的理解困难</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>2.2 如果你必须要重新给一个引用赋值,，使用 <code class="highlighter-rouge">let</code> 而不是<code class="highlighter-rouge">var</code>。详见 eslint: <a href="http://eslint.org/docs/rules/no-var.html"><code class="highlighter-rouge">no-var</code></a> jscs: <a href="http://jscs.info/rule/disallowVar"><code class="highlighter-rouge">disallowVar</code></a></p>

    <blockquote>
      <p>为什么？因为<code class="highlighter-rouge">let</code>是块级作用，而不像<code class="highlighter-rouge">var</code>有着函数作用域。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good, use the let.</span>
<span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>2.3 注意，使用<code class="highlighter-rouge">let</code>和<code class="highlighter-rouge">const</code>声明的变量，都只作用于块级作用域。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// const and let only exist in the blocks they are defined in.</span>
<span class="p">{</span>
  <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// ReferenceError</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span> <span class="c1">// ReferenceError</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="object-对象">Object 对象</h2>

<ul>
  <li>
    <p>3.1 尽量使用字面语法来直接创建对象。详见eslint: <a href="http://eslint.org/docs/rules/no-new-object.html"><code class="highlighter-rouge">no-new-object</code></a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.2 创建一个有着动态的属性名的对象时，尽量使用计算后的属性名。</p>

    <blockquote>
      <p>为什么？这样可以让你同时定义一个对象所有的属性</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">getKey</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="err">`</span><span class="nx">a</span> <span class="nx">key</span> <span class="nx">named</span> <span class="nx">$</span><span class="p">{</span><span class="nx">k</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'San Francisco'</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">obj</span><span class="p">[</span><span class="nx">getKey</span><span class="p">(</span><span class="s1">'enabled'</span><span class="p">)]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'San Francisco'</span><span class="p">,</span>
  <span class="p">[</span><span class="nx">getKey</span><span class="p">(</span><span class="s1">'enabled'</span><span class="p">)]:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.3 使用简写的属性方法。详见eslint: <a href="http://eslint.org/docs/rules/object-shorthand.html"><code class="highlighter-rouge">object-shorthand</code></a> jscs: <a href="http://jscs.info/rule/requireEnhancedObjectLiterals"><code class="highlighter-rouge">requireEnhancedObjectLiterals</code></a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">atom</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>

  <span class="na">addValue</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">atom</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">atom</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>

  <span class="nx">addValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">atom</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.4使用简写的属性值。详见 <a href="http://eslint.org/docs/rules/object-shorthand.html"><code class="highlighter-rouge">object-shorthand</code></a> jscs: <a href="http://jscs.info/rule/requireEnhancedObjectLiterals"><code class="highlighter-rouge">requireEnhancedObjectLiterals</code></a></p>

    <blockquote>
      <p>为什么？书写更简短，描述性更强。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">lukeSkywalker</span> <span class="o">=</span> <span class="s1">'Luke Skywalker'</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">lukeSkywalker</span><span class="p">:</span> <span class="nx">lukeSkywalker</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">lukeSkywalker</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.5 把简写的属性名统一分组写在声明对象最开始的地方。</p>

    <blockquote>
      <p>为什么？这样一下就能看出来哪些属性使用了简写。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">anakinSkywalker</span> <span class="o">=</span> <span class="s1">'Anakin Skywalker'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">lukeSkywalker</span> <span class="o">=</span> <span class="s1">'Luke Skywalker'</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">episodeOne</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">twoJediWalkIntoACantina</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nx">lukeSkywalker</span><span class="p">,</span>
  <span class="na">episodeThree</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="na">mayTheFourth</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="nx">anakinSkywalker</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">lukeSkywalker</span><span class="p">,</span>
  <span class="nx">anakinSkywalker</span><span class="p">,</span>
  <span class="na">episodeOne</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">twoJediWalkIntoACantina</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="na">episodeThree</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="na">mayTheFourth</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.6 只有在属性名是无效的标识符的时候才使用引号包起来使之成为字符串（比如数字开头或带有空格的多个词）。详见eslint: <a href="http://eslint.org/docs/rules/quote-props.html"><code class="highlighter-rouge">quote-props</code></a> jscs: <a href="http://jscs.info/rule/disallowQuotedKeysInObjects"><code class="highlighter-rouge">disallowQuotedKeysInObjects</code></a></p>

    <blockquote>
      <p>为什么？一般主观上来说这样更容易阅读，也有利于语法高亮和一些JS引擎优化。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">bad</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'foo'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s1">'bar'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="s1">'data-blah'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">good</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">foo</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="na">bar</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="s1">'data-blah'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.7 尽量不要直接调用某些<code class="highlighter-rouge">Object.prototype</code>的方法，比如 <code class="highlighter-rouge">hasOwnProperty</code>, <code class="highlighter-rouge">propertyIsEnumerable</code>, 和<code class="highlighter-rouge">isPrototypeOf</code>.</p>

    <blockquote>
      <p>为什么？因为某些对象里这些方法可能被覆写了，比如这种<code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">hasOwnProperty:</span><span class="w"> </span><span class="err">false</span><span class="w"> </span><span class="p">}</span></code> ，或者是一个null对象 (<code class="highlighter-rouge">Object.create(null)</code>).</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">));</span>

<span class="c1">// good</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">key</span><span class="p">));</span>

<span class="c1">// best</span>
<span class="kr">const</span> <span class="nx">has</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">;</span> <span class="c1">// cache the lookup once, in module scope.</span>
<span class="cm">/* or */</span>
<span class="kr">import</span> <span class="nx">has</span> <span class="nx">from</span> <span class="s1">'has'</span><span class="p">;</span>
<span class="err">…</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">has</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">key</span><span class="p">));</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>3.8 浅复制对象时使用<code class="highlighter-rouge">...</code>操作符而不是使用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"><code class="highlighter-rouge">Object.assign</code></a> </p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// very bad</span>
<span class="kr">const</span> <span class="nx">original</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>
<span class="kr">const</span> <span class="nx">copy</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">original</span><span class="p">,</span> <span class="p">{</span> <span class="na">c</span><span class="p">:</span> <span class="mi">3</span> <span class="p">});</span> <span class="c1">// this mutates `original` ಠ_ಠ</span>
<span class="k">delete</span> <span class="nx">copy</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span> <span class="c1">// so does this</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">original</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>
<span class="kr">const</span> <span class="nx">copy</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">original</span><span class="p">,</span> <span class="p">{</span> <span class="na">c</span><span class="p">:</span> <span class="mi">3</span> <span class="p">});</span> <span class="c1">// copy =&gt; { a: 1, b: 2, c: 3 }</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">original</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>
<span class="kr">const</span> <span class="nx">copy</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">original</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="mi">3</span> <span class="p">};</span> <span class="c1">// copy =&gt; { a: 1, b: 2, c: 3 }</span>

<span class="kr">const</span> <span class="p">{</span> <span class="nx">a</span><span class="p">,</span> <span class="p">...</span><span class="nx">noA</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">copy</span><span class="p">;</span> <span class="c1">// noA =&gt; { b: 2, c: 3 }</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="array-数组">Array 数组</h2>

<ul>
  <li>
    <p>4.1 使用字面语法来创建数组对象。详见eslint: <a href="http://eslint.org/docs/rules/no-array-constructor.html"><code class="highlighter-rouge">no-array-constructor</code></a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>4.2 使用<code class="highlighter-rouge">push()</code>方法来添加元素而不是直接赋值。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">someStack</span> <span class="o">=</span> <span class="p">[];</span>

<span class="c1">// bad</span>
<span class="nx">someStack</span><span class="p">[</span><span class="nx">someStack</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'abracadabra'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="nx">someStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'abracadabra'</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>4.3 使用<code class="highlighter-rouge">...</code>操作符来复制数组。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">itemsCopy</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">let</span> <span class="nx">i</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">itemsCopy</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">itemsCopy</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">items</span><span class="p">];</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>4.4 使用<code class="highlighter-rouge">Array.from()</code>来把一个类数组转化成数组。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'.foo'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>4.5 数组方法的回调函数里使用return声明。除非像8.2那样函数内只有一句表达的时候可以删去return，详见 <a href="http://eslint.org/docs/rules/array-callback-return"><code class="highlighter-rouge">array-callback-return</code></a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">((</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// good</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">flat</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]].</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">flatten</span> <span class="o">=</span> <span class="nx">memo</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
  <span class="nx">flat</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">flatten</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">flat</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]].</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">flatten</span> <span class="o">=</span> <span class="nx">memo</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
  <span class="nx">flat</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">flatten</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">flatten</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// bad</span>
<span class="nx">inbox</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">subject</span><span class="p">,</span> <span class="nx">author</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">subject</span> <span class="o">===</span> <span class="s1">'Mockingbird'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">author</span> <span class="o">===</span> <span class="s1">'Harper Lee'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// good</span>
<span class="nx">inbox</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">subject</span><span class="p">,</span> <span class="nx">author</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">subject</span> <span class="o">===</span> <span class="s1">'Mockingbird'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">author</span> <span class="o">===</span> <span class="s1">'Harper Lee'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="destructuring-去构造化">Destructuring 去构造化</h2>

<ul>
  <li>
    <p>5.1 在获取和使用多种对象的属性的时候，尽量对对象去构造化。详见jscs: <a href="http://jscs.info/rule/requireObjectDestructuring"><code class="highlighter-rouge">requireObjectDestructuring</code></a></p>

    <blockquote>
      <p>为什么？这样可以免于为这些属性设置很多临时的引用变量。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">getFullName</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">firstName</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">lastName</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span><span class="p">;</span>

  <span class="k">return</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">firstName</span><span class="p">}</span> <span class="nx">$</span><span class="p">{</span><span class="nx">lastName</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">getFullName</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
  <span class="k">return</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">firstName</span><span class="p">}</span> <span class="nx">$</span><span class="p">{</span><span class="nx">lastName</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// best</span>
<span class="kd">function</span> <span class="nx">getFullName</span><span class="p">({</span> <span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">firstName</span><span class="p">}</span> <span class="nx">$</span><span class="p">{</span><span class="nx">lastName</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>5.2 数组的去构造化。详见 jscs: <a href="http://jscs.info/rule/requireArrayDestructuring"><code class="highlighter-rouge">requireArrayDestructuring</code></a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">first</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">second</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="p">[</span><span class="nx">first</span><span class="p">,</span> <span class="nx">second</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>5.3 对多个返回值使用对象去构造化而不是数组去构造化。详见jscs: <a href="http://jscs.info/rule/disallowArrayDestructuringReturn"><code class="highlighter-rouge">disallowArrayDestructuringReturn</code></a></p>

    <blockquote>
      <p>为什么？因为这样你可以随时添加新属性或者改变顺序而不会影响调用。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">processInput</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// then a miracle occurs</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">,</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">bottom</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// the caller needs to think about the order of return data</span>
<span class="kr">const</span> <span class="p">[</span><span class="nx">left</span><span class="p">,</span> <span class="nx">__</span><span class="p">,</span> <span class="nx">top</span><span class="p">]</span> <span class="o">=</span> <span class="nx">processInput</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">processInput</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// then a miracle occurs</span>
  <span class="k">return</span> <span class="p">{</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">,</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">bottom</span> <span class="p">};</span>
<span class="p">}</span>

<span class="c1">// the caller selects only the data they need</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">top</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">processInput</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="strings-字符串">Strings 字符串</h2>

<ul>
  <li>
    <p>6.1 对字符串使用<strong>单</strong>引号。详见eslint: <a href="http://eslint.org/docs/rules/quotes.html"><code class="highlighter-rouge">quotes</code></a> jscs: <a href="http://jscs.info/rule/validateQuoteMarks"><code class="highlighter-rouge">validateQuoteMarks</code></a></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">"Capt. Janeway"</span><span class="p">;</span>

<span class="c1">// bad - template literals should contain interpolation or newlines</span>
<span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="err">`</span><span class="nx">Capt</span><span class="p">.</span> <span class="nx">Janeway</span><span class="err">`</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Capt. Janeway'</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>6.2 超过100个字符的长字符串不要使用换行符或者字符串拼接。</p>

    <blockquote>
      <p>为什么？难以处理，并且不方便搜索。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">'This is a super long error that was thrown because \
of Batman. When you stop to think about how Batman had anything to do \
with this, you would get nowhere \
fast.'</span><span class="p">;</span>

<span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">'This is a super long error that was thrown because '</span> <span class="o">+</span>
  <span class="s1">'of Batman. When you stop to think about how Batman had anything to do '</span> <span class="o">+</span>
  <span class="s1">'with this, you would get nowhere fast.'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>6.3 包含动态内容的字符串使用模版字符串而不是字符串拼接。详见eslint: <a href="http://eslint.org/docs/rules/prefer-template.html"><code class="highlighter-rouge">prefer-template</code></a> <a href="http://eslint.org/docs/rules/template-curly-spacing"><code class="highlighter-rouge">template-curly-spacing</code></a> jscs: <a href="http://jscs.info/rule/requireTemplateStrings"><code class="highlighter-rouge">requireTemplateStrings</code></a></p>

    <blockquote>
      <p>为什么？因为代码更简洁，可读性更好。方便合适的换行和字符串插入。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">'How are you, '</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">'?'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="s1">'How are you, '</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="s1">'?'</span><span class="p">].</span><span class="nx">join</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="err">`</span><span class="nx">How</span> <span class="nx">are</span> <span class="nx">you</span><span class="p">,</span> <span class="nx">$</span><span class="p">{</span> <span class="nx">name</span> <span class="p">}?</span><span class="err">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="err">`</span><span class="nx">How</span> <span class="nx">are</span> <span class="nx">you</span><span class="p">,</span> <span class="nx">$</span><span class="p">{</span><span class="nx">name</span><span class="p">}?</span><span class="err">`</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>6.4 在字符串中永远不要使用<code class="highlighter-rouge">eval()</code>，很容易出现bug。</p>
  </li>
  <li>
    <p>6.5 没有必要的时候不要使用转义符。详见eslint: <a href="http://eslint.org/docs/rules/no-useless-escape"><code class="highlighter-rouge">no-useless-escape</code></a></p>

    <blockquote>
      <p>为什么？因为反斜线大大影响代码阅读。除非必要不然不要使用。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s1">'\'this\' \i\s \"quoted\"'</span><span class="p">;</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s1">'\'this\' is "quoted"'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="err">`</span><span class="s1">'this'</span> <span class="nx">is</span> <span class="s2">"quoted"</span><span class="err">`</span><span class="p">;</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="functions-函数">Functions 函数</h2>

<ul>
  <li>
    <p>7.1 使用命名的函数表达式，而不是直接声明函数。详见eslint: <a href="http://eslint.org/docs/rules/func-style"><code class="highlighter-rouge">func-style</code></a> jscs: <a href="http://jscs.info/rule/requireFunctionDeclarations"><code class="highlighter-rouge">requireFunctionDeclarations</code></a></p>

    <blockquote>
      <p>为什么？因为函数声明会被提升到顶部，也就意味着很轻易就会出现函数在文件中被定义之前就被引用了。这影响了代码的可读性和维护性。如果你发现一个函数的定义已经大到或者复杂到影响对其他代码的理解，那么你最好把它抽出来到一个单独的模组。不要忘记命名函数，匿名函数通常在出现问题的时候很难去定位。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="p">};</span>

<span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
<span class="p">};</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.2 立即调用的函数（IIFE）记得用括号包起来。详见eslint: <a href="http://eslint.org/docs/rules/wrap-iife.html"><code class="highlighter-rouge">wrap-iife</code></a> jscs: <a href="http://jscs.info/rule/requireParenthesesAroundIIFE"><code class="highlighter-rouge">requireParenthesesAroundIIFE</code></a></p>

    <blockquote>
      <p>为什么？一个立即调用的函数是一个单独的整体。记得要用括号包起来整个内容。包括调用函数的一对括号。注意在现在这样一个到处都是模组的世界，基本上你不会需要用到这样的函数。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// immediately-invoked function expression (IIFE)</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Welcome to the Internet. Please follow me.'</span><span class="p">);</span>
<span class="p">}());</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.3 不要在非函数的代码块（比如if，while等）里直接声明函数，把函数赋给一个变量。浏览器虽然允许你这样做，但在解析的时候经常会有差别。详见eslint: <a href="http://eslint.org/docs/rules/no-loop-func.html"><code class="highlighter-rouge">no-loop-func</code></a></p>
  </li>
  <li>
    <p>7.4 注意：ECMA-262把块（<code class="highlighter-rouge">block</code>）定义为一系列语句（<code class="highlighter-rouge">statement</code>）。而函数声明（`function declaration并不算语句。详见 <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#page=97">Read ECMA-262’s note on this issue</a>.</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Nope.'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">let</span> <span class="nx">test</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">test</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Yup.'</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.5 不要把一个参数命名为<code class="highlighter-rouge">arguments</code>。这样在整个函数作用域里会判定为参数名而影响<code class="highlighter-rouge">arguments</code>对象的使用。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">nope</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">yup</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...stuff...</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.6 不要直接使用<code class="highlighter-rouge">arguments</code>，使用剩余参数的语法<code class="highlighter-rouge">…</code>。详见eslint: <a href="http://eslint.org/docs/rules/prefer-rest-params"><code class="highlighter-rouge">prefer-rest-params</code></a></p>

    <blockquote>
      <p>为什么？因为对于你想要处理的参数使用<code class="highlighter-rouge">...</code>是非常明确的，而且剩余参数是一个真实的数组，而不像arguments对象是一个类数组。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">concatenateAll</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">args</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">concatenateAll</span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">args</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.7 使用默认的参数语法，而不是转化成函数的<code class="highlighter-rouge">arguments</code></p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// really bad</span>
<span class="kd">function</span> <span class="nx">handleThings</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// No! We shouldn't mutate function arguments.</span>
  <span class="c1">// Double bad: if opts is falsy it'll be set to an object which may</span>
  <span class="c1">// be what you want but it can introduce subtle bugs.</span>
  <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// still bad</span>
<span class="kd">function</span> <span class="nx">handleThings</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span> <span class="o">===</span> <span class="k">void</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">opts</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">handleThings</span><span class="p">(</span><span class="nx">opts</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.8 避免默认参数的副作用。关于<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters">默认参数</a>。</p>

    <blockquote>
      <p>为什么？因为容易引起理解问题。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">count</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">count</span><span class="p">();</span>  <span class="c1">// 1</span>
<span class="nx">count</span><span class="p">();</span>  <span class="c1">// 2</span>
<span class="nx">count</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// 3</span>
<span class="nx">count</span><span class="p">();</span>  <span class="c1">// 3</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.9 永远把默认参数值放在最后。</p>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">function</span> <span class="nx">handleThings</span><span class="p">(</span><span class="nx">opts</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// good</span>
<span class="kd">function</span> <span class="nx">handleThings</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.10 永远不要使用函数构造器来创建一个新函数。详见eslint: <a href="http://eslint.org/docs/rules/no-new-func"><code class="highlighter-rouge">no-new-func</code></a>。</p>

    <blockquote>
      <p>为什么？因为这样会类似<code class="highlighter-rouge">eval()</code>来处理字符串。容易引起错误。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'return a + b'</span><span class="p">);</span>

<span class="c1">// still bad</span>
<span class="kd">var</span> <span class="nx">subtract</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'return a - b'</span><span class="p">);</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>7.11 函数签名的空格问题。详见eslint: <a href="http://eslint.org/docs/rules/space-before-function-paren"><code class="highlighter-rouge">space-before-function-paren</code></a> <a href="http://eslint.org/docs/rules/space-before-blocks"><code class="highlighter-rouge">space-before-blocks</code></a></p>

    <blockquote>
      <p>保持一致性总是好的。而且在删除或添加函数名的时候你也不需要添加或删除空格。</p>
    </blockquote>

    <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// bad</span>
<span class="kr">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){};</span>
<span class="kr">const</span> <span class="nx">g</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){};</span>
<span class="kr">const</span> <span class="nx">h</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>

<span class="c1">// good</span>
<span class="kr">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
<span class="kr">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">a</span><span class="p">()</span> <span class="p">{};</span>
</code></pre>
    </div>
  </li>
</ul>



  <!-- Disqus -->
  
  <div class="post-disqus">
      <section id="disqus_thread"></section>
      <script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
// (function() { // DON'T EDIT BELOW THIS LINE
// var d = document, s = d.createElement('script');
// s.src = '//.disqus.com/embed.js';
// s.setAttribute('data-timestamp', +new Date());
// (d.head || d.body).appendChild(s);
// })();
</script>
<!--<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->

  </div>
  

</div>


    <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<div class="footer">
  <hr />
  <div class="footer-link">
    
	
	
	
	

    

    
    <a href="https://github.com/shadeofgod"><i class="fa fa-github" aria-hidden="true"></i></a>
    
	
	
    <a href="http://stackoverflow.com/users/shadeofgod"><i class="fa fa-stack-overflow" aria-hidden="true"></i></a>
    
	
	
    <a href="https://www.quora.com/profile/shadeofgod"><i class="fa fa-quora" aria-hidden="true"></i></a>
    

    
	
	
	
	
	
	
	
	

    

    

    
    <a href="mailto:zoubingwu@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    

  </div>
  © 2017 shadeofgod. All rights reserved.
</div>

  </div>
</body>
</html>
